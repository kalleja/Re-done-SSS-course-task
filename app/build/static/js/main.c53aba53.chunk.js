(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{154:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(39),o=n.n(i),c=n(15),s=n(58),l=n(62),u=n(63),d=n(3),p=n(4),h=n(9),m=n(59),E=n(61),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/";return[].concat(Object(E.a)(e.map(function(e){return e})),[t.toUpperCase()]).join(n)},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=g(e,t,n);return{TYPE:"".concat(a),PENDING:"".concat(a,"_PENDING"),REJECTED:"".concat(a,"_REJECTED"),FULFILLED:"".concat(a,"_FULFILLED")}},f=b([],"GET_ALL_QUIZZES"),v=b([],"GET_LEADERBOARD"),y=(g([],"JOIN_QUIZ"),g([],"JOIN_QUIZ_REQUEST")),O=g([],"JOIN_QUIZ_REJECT"),j=g([],"JOIN_QUIZ_WAIT"),w=g([],"JOIN_QUIZ_INFO"),T=g([],"LEAVE_QUIZ_REQUEST"),C=g([],"START_QUIZ_SUCCESS"),k=g([],"FINISH_QUIZ_SUCCESS"),S=g([],"LOGOUT_REQUEST"),I=g([],"INCOMING_QUESTION"),D=g([],"ANSWER_QUESTION_REQUEST"),A=g([],"ANSWER_QUESTION_SUCCESS"),U=g([],"RECEIVE_USERS_ONLINE"),q=g([],"SOMEONE_JOINED_QUIZ"),R=g([],"SOMEONE_LEFT_QUIZ"),P=b([],"AUTHENTICATE_USER"),F=g([],"JWT_AUTHENTICATION_ERROR"),x=n(42),z=n.n(x),Q=new(function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return z.a.get(e,t)}},{key:"post",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return z.a.post(e,t,n)}}]),e}()),_=new(function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"getLeaderboard",value:function(){return new Promise(function(e,t){return Q.get("/quizzes/stats").then(function(t){e(t)}).catch(function(e){t(e)})})}},{key:"getQuizList",value:function(){return new Promise(function(e,t){return Q.get("/quizzes").then(function(t){e(t)}).catch(function(e){t(e)})})}},{key:"getUserToken",value:function(){return localStorage.getItem("token")}},{key:"removeUserToken",value:function(){return localStorage.removeItem("token")}},{key:"setUserToken",value:function(e){return localStorage.setItem("token",e)}},{key:"logout",value:function(){var e=this;return new Promise(function(t,n){Q.post("/auth/logout").then(function(n){e.removeUserToken(),t(n.data)}).catch(function(e){n(e)})})}},{key:"authenticateUser",value:function(){return new Promise(function(e,t){Q.get("/auth/user").then(function(t){e(t.data)}).catch(function(e){t(e)})})}},{key:"register",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(n,a){Q.post("/auth/signup",{name:e,password:t}).then(function(e){n(e.data)}).catch(function(e){a(e.response.data.errors)})})}},{key:"login",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(a,r){Q.post("/auth/login",{name:t,password:n}).then(function(t){e.setUserToken(t.data.token),a(t.data)}).catch(function(e){r(e.response.data.errors)})})}}]),e}()),L=Object(h.Record)({type:null,payload:{}}),N=[w,O,j,C,k,q,R,I,A,F],M=(new(function(){function e(){Object(d.a)(this,e),this.reconnectInterval=null,this.activeConnection=null,this.dispatchAction=null,this.isConnected=!1,this.webSocketMiddleware=this.webSocketMiddleware.bind(this),this.connect(),this.retry()}return Object(p.a)(e,[{key:"webSocketMiddleware",value:function(e){var t=this,n=e.dispatch;return this.setDispatchAction(n),function(e){return function(n){n.webSocketAction&&t.send({type:n.type,payload:n.payload}),e(n)}}}},{key:"setDispatchAction",value:function(e){this.dispatchAction=e}},{key:"setActiveConnection",value:function(e){this.activeConnection=e}},{key:"decodeMessage",value:function(e){var t={};try{t=JSON.parse(e)}catch(n){console.log(n)}return new L(t)}},{key:"parseMessage",value:function(e){var t=this.decodeMessage(e);N.includes(t.get("type"))&&this.dispatchAction({type:t.get("type"),payload:t.get("payload")})}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.activeConnection&&this.isConnected){var t=JSON.stringify(Object(u.a)({},e,{token:_.getUserToken()}));return this.activeConnection.send(t)}}},{key:"connect",value:function(){var e=this;this.setActiveConnection(new WebSocket(m.WEB_SOCKET_URL)),this.activeConnection.onopen=function(){e.isConnected=!0,e.activeConnection.onmessage=function(t){e.parseMessage(t.data),console.info("WebSocketService:",t.data)},console.info("WebSocketService: Connected")},this.activeConnection.onclose=function(){e.disconnect()},this.activeConnection.onerror=function(){e.disconnect()}}},{key:"retry",value:function(){var e=this;this.reconnectInterval=setInterval(function(){e.isConnected||(console.log("WebSocketService: Connecting..."),e.connect())},1e3)}},{key:"disconnect",value:function(){this.isConnected&&(this.isConnected=!1,this.activeConnection.close(),console.log("WebSocketService: Disconnected"))}}]),e}())).webSocketMiddleware,B=n(20),J=Object(h.Record)({name:null})(),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.FULFILLED:return e.withMutations(function(e){e.set("name",t.payload.name)});default:return e}},G=Object(h.Record)({answerId:null,isCorrect:!1}),Z=Object(h.Record)({name:null,answers:[],userAnswer:G()}),H=Object(h.Record)({questionId:null,question:Z()}),Y=Object(h.Record)({activeQuiz:null,activeQuestion:H(),activeUsers:[],error:null,waitForUsersCount:0,isInProgress:!1,isFinished:!1,isUnexpectedFinished:!1,usersOnline:0})(),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Y;case y:return e.withMutations(function(e){e.set("error",null),e.set("activeUsers",[]),e.set("activeQuestion",new h.Map),e.set("isInProgress",!1),e.set("isFinished",!1),e.set("isUnexpectedFinished",!1)});case O:return e.withMutations(function(e){e.set("error",Object(h.fromJS)(t.payload))});case w:return e.withMutations(function(e){e.set("activeQuiz",Object(h.fromJS)(t.payload))});case j:return e.withMutations(function(e){e.set("waitForUsersCount",t.payload)});case C:return e.withMutations(function(e){e.set("waitForUsersCount",0),e.set("isInProgress",!0),e.set("isFinished",!1),e.set("isUnexpectedFinished",!1),e.set("activeUsers",[]),e.set("activeQuestion",new h.Map)});case k:return e.withMutations(function(e){e.set("waitForUsersCount",0),e.set("isInProgress",!1),e.set("isFinished",!0),e.set("activeQuestion",new h.Map),e.set("activeUsers",t.payload.activeUsers),e.set("isUnexpectedFinished",!!t.payload.isUnexpectedFinished)});case I:return e.withMutations(function(e){e.set("activeQuestion",H({questionId:t.payload.questionId,question:Z(t.payload.question)})),e.set("activeUsers",t.payload.activeUsers)});case A:return e.withMutations(function(e){e.setIn(["activeQuestion","question","userAnswer"],G({answerId:t.payload.answerId,isCorrect:t.payload.isCorrect}))});case U:return e.withMutations(function(e){e.set("usersOnline",t.payload)});default:return e}},K=Object(h.Record)({data:new h.Map,isPending:!1,isError:!1})(),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.FULFILLED:return e.withMutations(function(e){e.set("isPending",!1),e.set("isError",!1),e.set("data",(new h.Map).withMutations(function(e){t.payload.data.forEach(function(t){return e.set(t._id,Object(h.fromJS)(t))})}))});case f.PENDING:return e.withMutations(function(e){e.set("isPending",!0),e.set("isError",!1),e.set("data",new h.Map)});case f.REJECTED:return e.withMutations(function(e){e.set("isError",!0),e.set("isPending",!1),e.set("data",new h.Map)});case q:case R:return e.withMutations(function(e){e.getIn(["data",t.payload.quizId])&&e.setIn(["data",t.payload.quizId,"user"],t.payload.user)});default:return e}},$=Object(h.Record)({data:[],isPending:!1,isError:!1})(),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.FULFILLED:return e.withMutations(function(e){e.set("isPending",!1),e.set("isError",!1),e.set("data",t.payload.data)});case v.PENDING:return e.withMutations(function(e){e.set("isPending",!0),e.set("isError",!1),e.set("data",[])});case v.REJECTED:return e.withMutations(function(e){e.set("isError",!0),e.set("isPending",!1),e.set("data",[])});default:return e}},te=Object(h.Record)({isAuthenticated:!1,jwtError:""})(),ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.FULFILLED:return e.withMutations(function(e){e.set("isAuthenticated",t.payload.isAuthenticated)});case F:return e.withMutations(function(e){e.set("jwtError",t.payload)});default:return e}},ae=Object(B.c)({user:W,quiz:V,quizList:X,leaderboard:ee,auth:ne}),re=[s.a,Object(l.a)(),M],ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||B.d,oe=Object(B.e)(ae,ie(B.a.apply(void 0,re))),ce=n(159),se=n(162),le=n(158),ue=n(160),de=n(7),pe=n(6),he=n(8),me=n(157),Ee=n(161),ge={getQuizList:function(){return function(e){return e({type:f.TYPE,payload:_.getQuizList})}},joinQuizRequest:function(e){return{type:y,payload:{quizId:e},webSocketAction:!0}},leaveQuizRequest:function(e){return{type:T,payload:{quizId:e},webSocketAction:!0}},logoutRequest:function(){return{type:S,payload:_.logout()}},answerQuestionRequest:function(e){return{type:D,payload:e,webSocketAction:!0}},getLeaderboard:function(){return function(e){return e({type:v.TYPE,payload:_.getLeaderboard})}},authenticateUser:function(){return function(e){return e({type:P.TYPE,payload:_.authenticateUser})}}},be=function(e){return e.quizList.get("data").toJS()},fe=function(e){return e.quizList.get("isError")},ve=function(e){return e.quizList.get("isPending")},ye=function(e){return e.quiz.get("error")},Oe=function(e){return e.quiz.get("waitForUsersCount")},je=function(e){return e.quiz.get("isInProgress")},we=function(e){return e.quiz.getIn(["activeQuiz","name"])},Te=function(e){return e.auth.get("isAuthenticated")},Ce=function(e){return e.quiz.get("isFinished")},ke=function(e){return e.quiz.get("activeQuestion")},Se=function(e){return e.quiz.get("activeUsers")},Ie=function(e){return e.leaderboard.get("data")},De=function(e){return e.leaderboard.get("isPending")},Ae=function(e){return e.leaderboard.get("isError")},Ue=function(e){return e.quiz.get("usersOnline")},qe=function(e){return e.quiz.get("isUnexpectedFinished")},Re=function(e){return e.user.get("name")},Pe=function(e){return e.auth.get("jwtError")},Fe=n(1),xe=function(e){function t(){return Object(d.a)(this,t),Object(de.a)(this,Object(pe.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.history,n=e.isAuthenticated,a=e.logoutAction,i=e.userName;return r.a.createElement(Fe.TopAppBar,null,r.a.createElement(Fe.TopAppBarRow,null,r.a.createElement(Fe.TopAppBarSection,{alignStart:!0},r.a.createElement(Fe.TopAppBarTitle,null,n?r.a.createElement(me.a,{to:"/dashboard"},r.a.createElement(Fe.Button,{theme:"onPrimary"},i)):r.a.createElement(me.a,{to:"/"},r.a.createElement(Fe.Button,{theme:"onPrimary"},"App")))),r.a.createElement(Fe.TopAppBarSection,{alignEnd:!0},r.a.createElement(me.a,{to:"/about"},r.a.createElement(Fe.Button,{unelevated:!0},"About")),n?r.a.createElement("div",null,r.a.createElement(me.a,{to:"/leaderboard"},r.a.createElement(Fe.Button,{unelevated:!0},"Student Scrore")),"\xa0",r.a.createElement(Fe.Button,{unelevated:!0,theme:"secondary-bg on-secondary",onClick:function(){a(),t.push("/"),window.location.reload()}},r.a.createElement(Fe.ButtonIcon,{icon:"exit_to_app"}),"Logout")):r.a.createElement("div",null,r.a.createElement(me.a,{to:"/sign-up"},r.a.createElement(Fe.Button,{unelevated:!0},"Sign up")),r.a.createElement(me.a,{to:"/login"},r.a.createElement(Fe.Button,{unelevated:!0},"Log in"))))))}}]),t}(a.Component),ze=Object(Ee.a)(Object(c.b)(function(e){return{userName:Re(e),isAuthenticated:Te(e)}},function(e){return{logoutAction:function(){return e(ge.logoutRequest())}}})(xe)),Qe=function(e){function t(){return Object(d.a)(this,t),Object(de.a)(this,Object(pe.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(Fe.Theme,{tag:"main",use:"primary-bg on-primary"},r.a.createElement(ze,null),r.a.createElement(Fe.TopAppBarFixedAdjust,null),r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"container"},r.a.createElement(Fe.Typography,{use:"headline1",tag:"h1"},"OESA"),r.a.createElement(Fe.Typography,{use:"headline5",tag:"h2"},"OLINE + EXAM + SERVICE + APP"),r.a.createElement(me.a,{to:"/sign-up"},r.a.createElement(Fe.Button,{theme:"onPrimary"},"Sign up")),"\xa0",r.a.createElement(me.a,{to:"/login"},r.a.createElement(Fe.Button,{raised:!0,theme:"secondary-bg on-secondary"},"Log in")))))}}]),t}(a.Component),_e=n(11),Le=n(10),Ne=(n(54),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(de.a)(this,Object(pe.a)(t).call(this,e))).handleQuizClick=n.handleQuizClick.bind(Object(_e.a)(Object(_e.a)(n))),n}return Object(he.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.getQuizList()}},{key:"handleQuizClick",value:function(e){var t=e._id;e.usersCount>=e.maxUsersCount||this.props.history.push("/play/".concat(t))}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.isError,i=t.isPending;return r.a.createElement(Le.DataTable,null,r.a.createElement(Le.DataTableContent,{style:{minWidth:"420px"}},r.a.createElement(Le.DataTableHead,null,r.a.createElement(Le.DataTableRow,null,r.a.createElement(Le.DataTableHeadCell,null,"Name"),r.a.createElement(Le.DataTableHeadCell,{alignEnd:!0},"Users"))),r.a.createElement(Le.DataTableBody,null,i?r.a.createElement(Le.DataTableRow,null,r.a.createElement(Le.DataTableCell,{alignMiddle:!0,colSpan:"2"},r.a.createElement(Fe.LinearProgress,{determinate:!1}))):null,a?r.a.createElement(Le.DataTableRow,{activated:!0},r.a.createElement(Le.DataTableCell,{alignMiddle:!0,colSpan:"2"},"Try again later")):null,Object.values(n).length>0?Object.values(n).sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}).map(function(t,n){return r.a.createElement(Le.DataTableRow,{key:n,activated:t.usersCount>=t.maxUsersCount},r.a.createElement(Le.DataTableCell,null,t.name),r.a.createElement(Le.DataTableCell,{alignEnd:!0},r.a.createElement(Fe.Button,{raised:!0,dense:!0,disabled:t.usersCount>=t.maxUsersCount,onClick:function(){return e.handleQuizClick(t)}},t.usersCount,"\xa0/\xa0",t.maxUsersCount)))}):null)))}}]),t}(a.Component));Ne.defaultProps={data:[]};var Me={getQuizList:ge.getQuizList},Be=Object(Ee.a)(Object(c.b)(function(e){return{data:be(e),isPending:ve(e),isError:fe(e),usersOnline:Ue(e)}},Me)(Ne)),Je=function(e){function t(){return Object(d.a)(this,t),Object(de.a)(this,Object(pe.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(Fe.Theme,{tag:"main"},r.a.createElement(ze,null),r.a.createElement(Fe.TopAppBarFixedAdjust,null),r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"container"},r.a.createElement(Fe.Typography,{use:"headline4",tag:"h1"},"Quiz List"),r.a.createElement(Be,null))))}}]),t}(a.Component),We=function(e){function t(){return Object(d.a)(this,t),Object(de.a)(this,Object(pe.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.getLeaderboard()}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.isPending,a=e.isError;return r.a.createElement(Le.DataTable,null,r.a.createElement(Le.DataTableContent,{style:{minWidth:"420px"}},r.a.createElement(Le.DataTableHead,null,r.a.createElement(Le.DataTableRow,null,r.a.createElement(Le.DataTableHeadCell,null,"Student"),r.a.createElement(Le.DataTableHeadCell,{alignEnd:!0},"Points"))),r.a.createElement(Le.DataTableBody,null,n?r.a.createElement(Le.DataTableRow,null,r.a.createElement(Le.DataTableCell,{alignMiddle:!0,colSpan:"2"},r.a.createElement(Fe.LinearProgress,{determinate:!1}))):null,a?r.a.createElement(Le.DataTableRow,{activated:!0},r.a.createElement(Le.DataTableCell,{alignMiddle:!0,colSpan:"2"},"Try again later")):null,t.length>0?t.map(function(e,t){return r.a.createElement(Le.DataTableRow,{key:t},r.a.createElement(Le.DataTableCell,null,e.name),r.a.createElement(Le.DataTableCell,{alignEnd:!0},e.total_points))}):null)))}}]),t}(a.Component);We.defaultProps={data:[]};var Ge=Object(Ee.a)(Object(c.b)(function(e){return{data:Ie(e),isPending:De(e),isError:Ae(e)}},function(e){return{getLeaderboard:function(){return e(ge.getLeaderboard())}}})(We)),Ze=function(e){function t(){return Object(d.a)(this,t),Object(de.a)(this,Object(pe.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(Fe.Theme,{tag:"main"},r.a.createElement(ze,null),r.a.createElement(Fe.TopAppBarFixedAdjust,null),r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"container"},r.a.createElement(Fe.Typography,{use:"headline4",tag:"h1"},"Student Score"),r.a.createElement(Ge,null))))}}]),t}(a.Component),He=Object(h.Record)({name:null,password:null}),Ye=Object(h.Record)({name:"",password:""}),Ve=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(de.a)(this,Object(pe.a)(t).call(this,e))).state={errors:new He({}),inputs:new Ye({}),isSnackbarOpen:!1},n.onSubmit=n.onSubmit.bind(Object(_e.a)(Object(_e.a)(n))),n.onTextFieldChange=n.onTextFieldChange.bind(Object(_e.a)(Object(_e.a)(n))),n}return Object(he.a)(t,e),Object(p.a)(t,[{key:"onSubmit",value:function(e){var t=this,n=this.state.inputs;e.preventDefault(),_.register(n.get("name"),n.get("password")).then(function(){_.login(n.get("name"),n.get("password")).then(function(){t.props.history.push("/dashboard"),window.location.reload()})}).catch(function(e){t.setState({errors:new He(e),isSnackbarOpen:!0})})}},{key:"onTextFieldChange",value:function(e){var t=this.state.inputs;this.setState({inputs:t.set(e.target.name,e.target.value)})}},{key:"render",value:function(){var e=this,t=this.state,n=t.inputs,a=t.errors;return r.a.createElement("form",{onSubmit:this.onSubmit,method:"post"},r.a.createElement(Fe.TextField,{fullwidth:!0,placeholder:"Username",value:n.get("name"),onChange:this.onTextFieldChange,type:"text",name:"name",invalid:null!==a.get("name")}),r.a.createElement(Fe.TextField,{fullwidth:!0,placeholder:"Password",value:n.get("password"),onChange:this.onTextFieldChange,type:"password",name:"password",invalid:null!==a.get("password")}),r.a.createElement("br",null),r.a.createElement(Fe.Button,{type:"submit",raised:!0,theme:"secondary-bg on-secondary"},"Sign up"),Object.values(a.toJS()).map(function(t,n){return t&&r.a.createElement(Fe.Snackbar,{key:n,show:e.state.isSnackbarOpen,onHide:function(){return e.setState({isSnackbarOpen:!1})},message:t,actionText:"Dismiss"})}))}}]),t}(a.Component),Ke=Object(Ee.a)(Ve),Xe=function(e){function t(){return Object(d.a)(this,t),Object(de.a)(this,Object(pe.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(Fe.Theme,{tag:"main"},r.a.createElement(ze,null),r.a.createElement(Fe.TopAppBarFixedAdjust,null),r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"container"},r.a.createElement(Fe.Typography,{use:"headline4",tag:"h1"},"Register"),r.a.createElement(Ke,null))))}}]),t}(a.Component),$e=Object(h.Record)({name:null,password:null}),et=Object(h.Record)({name:"",password:""}),tt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(de.a)(this,Object(pe.a)(t).call(this,e))).state={errors:new $e({}),inputs:new et({}),isSnackbarOpen:!1},n.onSubmit=n.onSubmit.bind(Object(_e.a)(Object(_e.a)(n))),n.onTextFieldChange=n.onTextFieldChange.bind(Object(_e.a)(Object(_e.a)(n))),n}return Object(he.a)(t,e),Object(p.a)(t,[{key:"onSubmit",value:function(e){var t=this,n=this.state.inputs;e.preventDefault(),_.login(n.get("name"),n.get("password")).then(function(){t.props.history.push("/dashboard"),window.location.reload()}).catch(function(e){t.setState({errors:new $e(e),isSnackbarOpen:!0})})}},{key:"onTextFieldChange",value:function(e){var t=this.state.inputs;this.setState({inputs:t.set(e.target.name,e.target.value)})}},{key:"render",value:function(){var e=this,t=this.state,n=t.inputs,a=t.errors;return r.a.createElement("form",{onSubmit:this.onSubmit,method:"post"},r.a.createElement(Fe.TextField,{fullwidth:!0,placeholder:"Username",value:n.get("name"),onChange:this.onTextFieldChange,type:"text",name:"name",invalid:null!==a.get("name")}),r.a.createElement(Fe.TextField,{fullwidth:!0,placeholder:"Password",value:n.get("password"),onChange:this.onTextFieldChange,type:"password",name:"password",invalid:null!==a.get("password")}),r.a.createElement("br",null),r.a.createElement(Fe.Button,{type:"submit",raised:!0,theme:"secondary-bg on-secondary"},"Log in"),Object.values(a.toJS()).map(function(t,n){return t&&r.a.createElement(Fe.Snackbar,{key:n,show:e.state.isSnackbarOpen,onHide:function(){return e.setState({isSnackbarOpen:!1})},message:t,actionText:"Dismiss"})}))}}]),t}(a.Component),nt=Object(Ee.a)(tt),at=function(e){function t(){return Object(d.a)(this,t),Object(de.a)(this,Object(pe.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(Fe.Theme,{tag:"main"},r.a.createElement(ze,null),r.a.createElement(Fe.TopAppBarFixedAdjust,null),r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"container"},r.a.createElement(Fe.Typography,{use:"headline4",tag:"h1"},"Log in"),r.a.createElement(nt,null))))}}]),t}(a.Component),rt=function(e){function t(){return Object(d.a)(this,t),Object(de.a)(this,Object(pe.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(Fe.Theme,{tag:"main",use:"primary-bg on-primary"},r.a.createElement(ze,null),r.a.createElement(Fe.TopAppBarFixedAdjust,null),r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"container"},r.a.createElement(Fe.Typography,{use:"headline4",tag:"h1"},"About"),r.a.createElement(Fe.Typography,{use:"body1",tag:"p"},"This is a online exam app with public and protected links for access control, handled by Passport on the back-end. Registered student can take part in universty exams in real-time remotly. All the exam interactions are done through WebSocket with JWT authentication. Student can even use this app to practise for the upp coming exam trough quiz games. Ther are even initial quiz questions and answers are downloaded from OpenTDB, parsed and inserted into database."))))}}]),t}(a.Component),it=n(30),ot=(n(55),10),ct=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(de.a)(this,Object(pe.a)(t).call(this,e))).getAnswerIcon=n.getAnswerIcon.bind(Object(_e.a)(Object(_e.a)(n))),n.handleTimerTick=n.handleTimerTick.bind(Object(_e.a)(Object(_e.a)(n))),n.handleStartTimer=n.handleStartTimer.bind(Object(_e.a)(Object(_e.a)(n))),n.handleStopTimer=n.handleStopTimer.bind(Object(_e.a)(Object(_e.a)(n))),n.handleDialogOpen=n.handleDialogOpen.bind(Object(_e.a)(Object(_e.a)(n))),n.handleDialogClose=n.handleDialogClose.bind(Object(_e.a)(Object(_e.a)(n))),n.state={timer:ot,isPaused:!0,isDialogOpen:!1},n}return Object(he.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.activeQuestion.questionId!==e.activeQuestion.questionId&&this.handleStartTimer()}},{key:"componentDidMount",value:function(){this.props.joinQuizRequest(this.props.quizId)}},{key:"componentWillUnmount",value:function(){this.props.leaveQuizRequest(this.props.quizId)}},{key:"handleTimerTick",value:function(){this.setState({timer:this.state.timer-1})}},{key:"handleStartTimer",value:function(){clearInterval(this.interval),this.setState({timer:ot,isPaused:!0}),this.interval=setInterval(this.handleTimerTick,1e3),this.setState({isPaused:!1})}},{key:"handleStopTimer",value:function(){clearInterval(this.interval),this.setState({isPaused:!0})}},{key:"handleAnswerClick",value:function(e){null===this.props.activeQuestion.question.userAnswer.answerId&&(this.props.answerQuestionRequest({quizId:this.props.quizId,questionId:this.props.activeQuestion.questionId,answerId:e}),this.handleStopTimer())}},{key:"getAnswerIcon",value:function(e){var t=this.props.activeQuestion;return null===t.question.userAnswer.answerId?"radio_button_unchecked":t.question.userAnswer.answerId!==e?"radio_button_unchecked":t.question.userAnswer.isCorrect?"check":"close"}},{key:"handleDialogOpen",value:function(){this.setState({isDialogOpen:!0})}},{key:"handleDialogClose",value:function(e){this.setState({isDialogOpen:!1}),"accept"===e.detail.action&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this,t=this.props,n=t.error,a=t.waitForUsersCount,i=t.isInProgress,o=t.isFinished,c=t.isUnexpectedFinished,s=t.quizName,l=t.activeQuestion,u=t.activeUsers,d=t.jwtError,p=this.state.isPaused,h=new Date(1e3*this.state.timer);return r.a.createElement("div",null,r.a.createElement(Fe.Dialog,{open:""!==d},r.a.createElement(Fe.DialogTitle,null,"Authentication Error"),r.a.createElement(Fe.DialogContent,null,d),r.a.createElement(Fe.DialogActions,null,r.a.createElement(me.a,{to:"/dashboard"},r.a.createElement(Fe.DialogButton,null,"Close")))),r.a.createElement(Fe.Dialog,{open:this.state.isDialogOpen,onClose:function(t){return e.handleDialogClose(t)}},r.a.createElement(Fe.DialogTitle,null,"Are you sure?"),r.a.createElement(Fe.DialogContent,null,"You will not get any points"),r.a.createElement(Fe.DialogActions,null,r.a.createElement(Fe.DialogButton,{action:"close"},"Cancel"),r.a.createElement(Fe.DialogButton,{action:"accept",isDefaultAction:!0},"Yes"))),r.a.createElement(Fe.TopAppBar,null,r.a.createElement(Fe.TopAppBarRow,null,r.a.createElement(Fe.TopAppBarSection,{alignEnd:!0},i?r.a.createElement(Fe.Button,{unelevated:!0,onClick:this.handleDialogOpen},r.a.createElement(Fe.ButtonIcon,{icon:"close"}),"Finish Quiz"):r.a.createElement(me.a,{to:"/dashboard"},r.a.createElement(Fe.Button,{unelevated:!0},r.a.createElement(Fe.ButtonIcon,{icon:"arrow_back"}),"Back to Dashboard"))))),r.a.createElement(Fe.TopAppBarFixedAdjust,null),r.a.createElement("div",{className:"page"},r.a.createElement(Fe.Grid,{fixedColumnWidth:!0,align:"left"},o?r.a.createElement(Fe.GridCell,{span:"12"},r.a.createElement(Fe.Typography,{use:"headline1",tag:"h1"},"Finished"),c?r.a.createElement(Fe.Typography,{use:"headline6",tag:"h6"},"Oh no, someone has left the quiz. You still get to keep your points!"):null):null,i||o||c?null:r.a.createElement(Fe.GridCell,{span:"12"},r.a.createElement(Fe.Typography,{use:"headline1",tag:"h1"},s)),r.a.createElement(Fe.GridCell,{span:"4"},0===a||i?null:r.a.createElement(Fe.ThemeProvider,{options:{primary:"#03dac4"}},r.a.createElement(Fe.Typography,{use:"headline6",tag:"h6"},"Waiting for ",a," more users to join..."),r.a.createElement(Fe.LinearProgress,{determinate:!1})),n?r.a.createElement("span",null,n):null),Object.keys(l).length&&l.question?r.a.createElement(Fe.GridCell,{span:"12"},r.a.createElement(Fe.List,{theme:"textPrimaryOnDark"},r.a.createElement(Fe.Typography,{use:"headline2",tag:"h2"},p?r.a.createElement(Fe.ThemeProvider,{options:{primary:"#03dac4"}},r.a.createElement(it.CircularProgress,{size:"xlarge"})):r.a.createElement("span",null,"00:",h.getSeconds()<10?"0":"",h.getSeconds())),r.a.createElement(Fe.Typography,{use:"headline5",tag:"h5"},l.question.name),l.question.answers.map(function(t,n){return r.a.createElement(Fe.ListItem,{key:n,disabled:null!==l.question.userAnswer.answerId&&l.question.userAnswer.answerId!==n,onClick:function(){return e.handleAnswerClick(n)}},r.a.createElement(Fe.ListItemGraphic,{style:{color:"inherit"},icon:e.getAnswerIcon(n)})," ",t)}))):null,u.length>0?r.a.createElement(Fe.GridCell,{span:"12"},r.a.createElement(Fe.ChipSet,null,u.map(function(e,t){return r.a.createElement(Fe.Chip,{key:t,selected:!0,leadingIcon:"person"},e.name,":"," ",r.a.createElement("b",null,e.points))}))):null)))}}]),t}(a.Component);ct.defaultProps={data:{}};var st=Object(Ee.a)(Object(c.b)(function(e){return{error:ye(e),waitForUsersCount:Oe(e),quizName:we(e),isInProgress:je(e),isFinished:Ce(e),isUnexpectedFinished:qe(e),activeQuestion:ke(e),activeUsers:Se(e),jwtError:Pe(e)}},function(e){return{joinQuizRequest:function(t){return e(ge.joinQuizRequest(t))},leaveQuizRequest:function(t){return e(ge.leaveQuizRequest(t))},answerQuestionRequest:function(t){return e(ge.answerQuestionRequest(t))}}})(ct)),lt=function(e){function t(){return Object(d.a)(this,t),Object(de.a)(this,Object(pe.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.match.params.quizId;return r.a.createElement(Fe.Theme,{tag:"main",use:"primary-bg on-primary"},r.a.createElement(st,{quizId:e}))}}]),t}(a.Component),ut=function(e){function t(){return Object(d.a)(this,t),Object(de.a)(this,Object(pe.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(Fe.Theme,{tag:"main"},r.a.createElement(ze,null),r.a.createElement(Fe.TopAppBarFixedAdjust,null),r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"container"},r.a.createElement(it.CircularProgress,{size:"xlarge"}))))}}]),t}(a.Component),dt=function(e){function t(){return Object(d.a)(this,t),Object(de.a)(this,Object(pe.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;_.authenticateUser().then(function(t){t.isAuthenticated||e.props.history.push("/")})}},{key:"render",value:function(){return this.props.isAuthenticated?this.props.children:r.a.createElement(ut,null)}}]),t}(a.Component),pt=Object(Ee.a)(Object(c.b)(function(e){return{isAuthenticated:Te(e)}})(dt)),ht=function(e){function t(){return Object(d.a)(this,t),Object(de.a)(this,Object(pe.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.authenticateUser()}},{key:"render",value:function(){return this.props.children}}]),t}(a.Component),mt={authenticateUser:ge.authenticateUser},Et=Object(Ee.a)(Object(c.b)(function(){return{}},mt)(ht));n(154);o.a.render(r.a.createElement(Fe.RMWCProvider,null,r.a.createElement(Fe.ThemeProvider,{options:{primary:"#6200ee",secondary:"#03dac4",error:"#b00020"}},r.a.createElement(c.a,{store:oe},r.a.createElement(ce.a,null,r.a.createElement(Et,null,r.a.createElement(se.a,null,r.a.createElement(le.a,{exact:!0,path:"/",component:Qe}),r.a.createElement(le.a,{exact:!0,path:"/sign-up",component:Xe}),r.a.createElement(le.a,{exact:!0,path:"/login",component:at}),r.a.createElement(le.a,{exact:!0,path:"/about",component:rt}),r.a.createElement(pt,null,r.a.createElement(se.a,null,r.a.createElement(le.a,{exact:!0,path:"/leaderboard",component:Ze}),r.a.createElement(le.a,{exact:!0,path:"/dashboard",component:Je}),r.a.createElement(le.a,{exact:!0,path:"/play/:quizId",component:lt}),r.a.createElement(ue.a,{to:"/"}))))))))),document.getElementById("root"))},59:function(e,t,n){e.exports=n(73)},64:function(e,t,n){e.exports=n(156)},73:function(e,t){e.exports={WEB_SOCKET_URL:window.location.origin.replace(/^http/,"ws")}},74:function(e,t){e.exports={WEB_SOCKET_URL:"ws://localhost:3000"}}},[[64,2,1]]]);
//# sourceMappingURL=main.c53aba53.chunk.js.map